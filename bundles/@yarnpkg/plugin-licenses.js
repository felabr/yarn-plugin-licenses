/* eslint-disable */
module.exports = {
name: "@yarnpkg/plugin-licenses",
factory: function (require) {
var plugin;plugin=(()=>{"use strict";var __webpack_modules__={402:(e,_,r)=>{r.r(_),r.d(_,{default:()=>m});var t={};r.r(t),r.d(t,{getPackageManifest:()=>p});const n=require("@yarnpkg/cli");var a=r(966);const i=require("clipanion");var o=r(688),s=r(300);const c=require("@yarnpkg/parsers"),p=async(e,_)=>{await u(e);const r=a.structUtils.convertPackageToLocator(_),t=l[a.structUtils.stringifyLocator(r)];if(!t)return null;const n=t.locations[0],i=n?o.ppath.join(n,o.Filename.manifest):o.Filename.manifest,s=o.ppath.join(e.cwd,i),c=await o.xfs.readFilePromise(s,"utf8");return JSON.parse(c)};let l;const u=async e=>{if(!l){const _=o.ppath.join(e.configuration.projectCwd,o.Filename.nodeModules,".yarn-state.yml");l=(0,c.parseSyml)(await o.xfs.readFilePromise(_,"utf8"))}},d=("@yarnpkg"===o.npath.basename(__dirname)?o.ppath.join(o.npath.toPortablePath(__dirname),"..",".."):o.ppath.join(o.npath.toPortablePath(__dirname),".."),async(e,_,r)=>{const n={},i={children:n};let o;o=r?e.storedDescriptors.values():e.workspaces.flatMap(e=>{const _=[e.anchoredDescriptor];return _.push(...e.dependencies.values()),_});const c=a.miscUtils.sortMap(o,e=>a.structUtils.stringifyDescriptor(e)),p=(e=>{switch(e){case"pnp":return s;case"node-modules":return t;default:throw new Error("Unsupported linker")}})(e.configuration.get("nodeLinker"));for(const r of c.values()){const t=e.storedResolutions.get(r.descriptorHash);if(!t)continue;const i=e.storedPackages.get(t);if(!i)continue;const o=a.structUtils.convertPackageToLocator(i),s=await p.getPackageManifest(e,i);if(null===s)continue;const{license:c,url:l,vendorName:u,vendorUrl:d}=f(s);n[c]||(n[c]={value:a.formatUtils.tuple(a.formatUtils.Type.NO_HINT,c),children:{}});const k={value:a.formatUtils.tuple(a.formatUtils.Type.DEPENDENT,{locator:o,descriptor:r}),children:{...l?{url:{value:a.formatUtils.tuple(a.formatUtils.Type.NO_HINT,g("URL",l,_))}}:{},...u?{vendorName:{value:a.formatUtils.tuple(a.formatUtils.Type.NO_HINT,g("VendorName",u,_))}}:{},...d?{vendorUrl:{value:a.formatUtils.tuple(a.formatUtils.Type.NO_HINT,g("VendorUrl",d,_))}}:{}}},P=a.structUtils.stringifyLocator(o);n[c].children[P]=k}return i}),f=e=>{const{license:_,repository:r,homepage:t,author:n}=e;return{license:("string"!=typeof _?null==_?void 0:_.type:_)||"UNKNOWN",url:(null==r?void 0:r.url)||t,vendorName:null==n?void 0:n.name,vendorUrl:t||(null==n?void 0:n.url)}},g=(e,_,r)=>r?_:`${e}: ${_}`;var k=function(e,_,r,t){var n,a=arguments.length,i=a<3?_:null===t?t=Object.getOwnPropertyDescriptor(_,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,_,r,t);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(a<3?n(i):a>3?n(_,r,i):n(_,r))||i);return a>3&&i&&Object.defineProperty(_,r,i),i};class P extends i.Command{constructor(){super(...arguments),this.recursive=!1,this.json=!1}async execute(){const e=await a.Configuration.find(this.context.cwd,this.context.plugins),{project:_,workspace:r}=await a.Project.find(e,this.context.cwd);if(!r)throw new n.WorkspaceRequiredError(_.cwd,this.context.cwd);await _.restoreInstallState();const t=await d(_,this.json,this.recursive);a.treeUtils.emitTree(t,{configuration:e,stdout:this.context.stdout,json:this.json,separators:1})}}P.usage=i.Command.Usage({description:"display the licenses for all packages in the project",details:"\n      This command prints the license information for packages in the project. By default, only direct dependencies are listed.\n\n      If `-R,--recursive` is set, the listing will include transitive dependencies (dependencies of direct dependencies).\n    ",examples:[["List all licenses of direct dependencies","$0 licenses list"],["List all licenses of direct and transitive dependencies","$0 licenses list --recursive"]]}),k([i.Command.Boolean("-R,--recursive")],P.prototype,"recursive",void 0),k([i.Command.Boolean("--json")],P.prototype,"json",void 0),k([i.Command.Path("licenses","list")],P.prototype,"execute",null);const m={commands:[P]}},300:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getPackageManifest:()=>getPackageManifest});var _yarnpkg_plugin_pnp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(798),_yarnpkg_plugin_pnp__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_yarnpkg_plugin_pnp__WEBPACK_IMPORTED_MODULE_0__),_yarnpkg_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(966),_yarnpkg_core__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_yarnpkg_core__WEBPACK_IMPORTED_MODULE_1__),_yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(688),_yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__),_yarnpkg_libzip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76),_yarnpkg_libzip__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_yarnpkg_libzip__WEBPACK_IMPORTED_MODULE_3__);const getPackageManifest=async(e,_)=>{makePnPApi(e);const r=_yarnpkg_core__WEBPACK_IMPORTED_MODULE_1__.structUtils.convertPackageToLocator(_),t={name:_yarnpkg_core__WEBPACK_IMPORTED_MODULE_1__.structUtils.stringifyIdent(r),reference:r.reference},n=pnpApi.getPackageInformation(t);if(!n)return null;const{packageLocation:a}=n,i=_yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__.ppath.join(a,_yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__.Filename.manifest),o=await fs.readFilePromise(i,"utf8");return JSON.parse(o)};let pnpApi;const makePnPApi=project=>{pnpApi||(pnpApi=eval("module.require")((0,_yarnpkg_plugin_pnp__WEBPACK_IMPORTED_MODULE_0__.getPnpPath)(project).main))},fs=new _yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__.VirtualFS({baseFs:new _yarnpkg_fslib__WEBPACK_IMPORTED_MODULE_2__.ZipOpenFS({libzip:(0,_yarnpkg_libzip__WEBPACK_IMPORTED_MODULE_3__.getLibzipSync)(),readOnlyArchives:!0})})},966:e=>{e.exports=require("@yarnpkg/core")},688:e=>{e.exports=require("@yarnpkg/fslib")},76:e=>{e.exports=require("@yarnpkg/libzip")},798:e=>{e.exports=require("@yarnpkg/plugin-pnp")}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var _=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](_,_.exports,__webpack_require__),_.exports}return __webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(e,_)=>{for(var r in _)__webpack_require__.o(_,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:_[r]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(402)})();
return plugin;
}
};